<div class="page-container">
    <!-- HEADER -->
    <header class="page-header">
      <div class="page-title-block">
        <div class="title-with-back">
          <button
            type="button"
            class="btn-icon-back"
            [routerLink]="['/dashboard/adminEmpotageMain']"
            title="Retour"
          >
            <span class="material-symbols-outlined notranslate">arrow_back</span>
          </button>
          <div class="title-content">
            <h1 class="page-title">
              Supervision des Empotages 
              <span *ngIf="entrepotName" class="warehouse-name">— {{ entrepotName }}</span>
            </h1>
            <p class="page-subtitle">
              <span class="material-symbols-outlined notranslate icon-subtitle">admin_panel_settings</span>
              Vue administrateur - Monitoring temps réel des opérations
            </p>
          </div>
        </div>
      </div>
      <button class="btn btn-primary">
        <span class="material-symbols-outlined notranslate">download</span>
        <span>Exporter en CSV</span>
      </button>
    </header>

    <!-- STATS CARDS -->
    <section class="stats-grid">
      <!-- Total -->
      <article class="card stat-card">
        <div class="icon-box bg-blue-100 text-blue-600">
          <span class="material-symbols-outlined notranslate">inventory_2</span>
        </div>
        <div class="stat-info">
          <p class="stat-label">Total</p>
          <p class="stat-value">{{ stats.total | number }}</p>
        </div>
      </article>

      <!-- Aujourd'hui -->
      <article class="card stat-card">
        <div class="icon-box bg-blue-100 text-blue-600">
          <span class="material-symbols-outlined notranslate">today</span>
        </div>
        <div class="stat-info">
          <p class="stat-label">Aujourd'hui</p>
          <p class="stat-value">{{ stats.today }}</p>
        </div>
      </article>

      <!-- Cette semaine -->
      <article class="card stat-card">
        <div class="icon-box bg-purple-100 text-purple-600">
          <span class="material-symbols-outlined notranslate">date_range</span>
        </div>
        <div class="stat-info">
          <p class="stat-label">Cette semaine</p>
          <p class="stat-value">{{ stats.week }}</p>
        </div>
      </article>

      <!-- Ce mois -->
      <article class="card stat-card">
        <div class="icon-box bg-green-100 text-green-600">
          <span class="material-symbols-outlined notranslate">calendar_month</span>
        </div>
        <div class="stat-info">
          <p class="stat-label">Ce mois</p>
          <p class="stat-value">{{ stats.month }}</p>
        </div>
      </article>
      
      <!-- Cette année -->
      <article class="card stat-card">
        <div class="icon-box bg-orange-100 text-orange-600">
          <span class="material-symbols-outlined notranslate">event</span>
        </div>
        <div class="stat-info">
          <p class="stat-label">Cette année</p>
          <p class="stat-value">{{ stats.year }}</p>
        </div>
      </article>
    </section>

    <!-- FILTERS -->
    <section class="controls-area">
      <div class="search-and-filters">
        <!-- N° Booking Search -->
        <div class="search-box">
          <span class="material-symbols-outlined notranslate search-icon">search</span>
          <input 
            type="text" 
            placeholder="Rechercher par N° Booking..." 
            [(ngModel)]="filters.booking" 
            (ngModelChange)="applyFilters()"
          />
        </div>

        <!-- Client Select -->
         <!-- <div class="select-box">
          <select [(ngModel)]="filters.client" (change)="applyFilters()" class="custom-select">
            <option value="all">Tous les clients</option>
            <option value="cma">CMA CGM</option>
            <option value="maersk">Maersk</option>
          </select>
         </div> -->

        <!-- Date Start -->
        <div class="date-wrapper">
          <span class="material-symbols-outlined notranslate left-icon">event</span>
          <input 
            type="text" 
            class="date-input" 
            [(ngModel)]="filters.dateDebut" 
            (ngModelChange)="applyFilters()"
            placeholder="Date de début"
            onfocus="(this.type='date')"
            onblur="(this.value ? this.type='date' : this.type='text')"
          />
        </div>

        <!-- Date End -->
        <div class="date-wrapper">
          <span class="material-symbols-outlined notranslate left-icon">event</span>
          <input 
            type="text" 
            class="date-input" 
            [(ngModel)]="filters.dateFin" 
            (ngModelChange)="applyFilters()"
            placeholder="Date de fin"
            onfocus="(this.type='date')"
            onblur="(this.value ? this.type='date' : this.type='text')"
          />
        </div>

        <!-- Reset Button -->
        <!-- <button class="btn-icon-reset" (click)="resetFilters()" title="Réinitialiser">
          <span class="material-symbols-outlined notranslate">refresh</span>
        </button> -->
      </div>
    </section>

    <!-- TABLE LIST -->
    <section class="card" style="margin-top: 2rem;">
        <div class="table-wrapper">
          <table>
            <thead>
              <tr>
                <th>CLIENT</th>
                <th>BOOKING</th>
                <th class="text-center">CONTENEURS</th>
                <th class="text-center">VOLUME (M³)</th>
                <th>DÉBUT</th>
                <th>FIN</th>
                <th class="text-right">ACTION</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let op of paginatedOperations">
                <td>
                  <div class="client-info">
                    <strong>{{ op.clientName }}</strong>
                    <!-- <small>Init: {{ op.clientInitials }}</small> -->
                  </div>
                </td>
                <td>
                    <span class="booking-link">{{ op.booking }}</span>
                </td>
                <td class="text-center">{{ op.conteneurs }}</td>
                <td class="text-center">{{ op.volume }}</td>
                <td>
                   <span style="font-size: 0.9rem; color: #64748b;">{{ op.debutPrevu }}</span>
                </td>
                <td>
                   <span style="font-size: 0.9rem; color: #64748b;">{{ op.finEstimee }}</span>
                </td>
                <td class="text-right">
                  <div class="actions">
                    <button class="btn-icon" title="Imprimer" (click)="printOperation(op)">
                        <span class="material-symbols-outlined notranslate">print</span>
                    </button>
                  </div>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
        
        <div class="pagination-footer" *ngIf="totalPages > 1" style="padding: 1rem; border-top: 1px solid var(--border-light); display: flex; justify-content: space-between; align-items: center;">
          <span class="page-info" style="font-size: 0.8rem; color: var(--text-secondary); font-weight: 600;">PAGE {{ currentPage }} DE {{ totalPages }}</span>
          <div class="pagination-controls" style="display: flex; gap: 0.5rem;">
            <button class="btn-page" [disabled]="currentPage === 1" (click)="prevPage()" style="padding: 0.5rem; border: 1px solid var(--border-light); background: white; border-radius: 0.5rem; cursor: pointer; display: flex;">
              <span class="material-symbols-outlined notranslate">chevron_left</span>
            </button>
            <button class="btn-page" [disabled]="currentPage === totalPages" (click)="nextPage()" style="padding: 0.5rem; border: 1px solid var(--border-light); background: white; border-radius: 0.5rem; cursor: pointer; display: flex;">
              <span class="material-symbols-outlined notranslate">chevron_right</span>
            </button>
          </div>
        </div>
      </section>
</div>

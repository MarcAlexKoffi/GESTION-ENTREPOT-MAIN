<div class="page-container">
    <!-- HEADER -->
    <header class="page-header">
      <div class="page-title-block">
        <div class="title-with-back">
          <button
            type="button"
            class="btn-icon-back"
            [routerLink]="['/dashboard/adminEmpotageMain']"
            title="Retour"
          >
            <span class="material-symbols-outlined">arrow_back</span>
          </button>
          <div class="title-content">
            <h1 class="page-title">
              Supervision des Empotages 
              <span *ngIf="entrepotName" class="warehouse-name">— {{ entrepotName }}</span>
            </h1>
            <p class="page-subtitle">
              <span class="material-symbols-outlined icon-subtitle">admin_panel_settings</span>
              Vue administrateur - Monitoring temps réel des opérations
            </p>
          </div>
        </div>
      </div>
      <button class="btn btn-primary">
        <span class="material-symbols-outlined">download</span>
        <span>Exporter en CSV</span>
      </button>
    </header>

    <!-- STATS CARDS -->
    <section class="stats-grid">
      <!-- Total -->
      <article class="card stat-card">
        <div class="icon-box bg-blue-100 text-blue-600">
          <span class="material-symbols-outlined">inventory_2</span>
        </div>
        <div class="stat-info">
          <p class="stat-label">Total</p>
          <p class="stat-value">{{ stats.total | number }}</p>
        </div>
      </article>

      <!-- Aujourd'hui -->
      <article class="card stat-card">
        <div class="icon-box bg-blue-100 text-blue-600">
          <span class="material-symbols-outlined">today</span>
        </div>
        <div class="stat-info">
          <p class="stat-label">Aujourd'hui</p>
          <p class="stat-value">{{ stats.today }}</p>
        </div>
      </article>

      <!-- Cette semaine -->
      <article class="card stat-card">
        <div class="icon-box bg-purple-100 text-purple-600">
          <span class="material-symbols-outlined">date_range</span>
        </div>
        <div class="stat-info">
          <p class="stat-label">Cette semaine</p>
          <p class="stat-value">{{ stats.week }}</p>
        </div>
      </article>

      <!-- Ce mois -->
      <article class="card stat-card">
        <div class="icon-box bg-green-100 text-green-600">
          <span class="material-symbols-outlined">calendar_month</span>
        </div>
        <div class="stat-info">
          <p class="stat-label">Ce mois</p>
          <p class="stat-value">{{ stats.month }}</p>
        </div>
      </article>
      
      <!-- Cette année -->
      <article class="card stat-card">
        <div class="icon-box bg-orange-100 text-orange-600">
          <span class="material-symbols-outlined">event</span>
        </div>
        <div class="stat-info">
          <p class="stat-label">Cette année</p>
          <p class="stat-value">{{ stats.year }}</p>
        </div>
      </article>
    </section>

    <!-- FILTERS -->
    <section class="controls-area">
      <div class="search-and-filters">
        <!-- N° Booking Search -->
        <div class="search-box">
          <span class="material-symbols-outlined search-icon">search</span>
          <input 
            type="text" 
            placeholder="Rechercher par N° Booking..." 
            [(ngModel)]="filters.booking" 
            (ngModelChange)="applyFilters()"
          />
        </div>

        <!-- Client Select -->
         <div class="select-box">
          <select [(ngModel)]="filters.client" (change)="applyFilters()" class="custom-select">
            <option value="all">Tous les clients</option>
            <option value="cma">CMA CGM</option>
            <option value="maersk">Maersk</option>
          </select>
         </div>

        <!-- Date Start -->
        <input 
          type="date" 
          class="date-input" 
          [(ngModel)]="filters.dateDebut" 
          (ngModelChange)="applyFilters()"
          title="Date de début"
        />

        <!-- Date End -->
        <input 
          type="date" 
          class="date-input" 
          [(ngModel)]="filters.dateFin" 
          (ngModelChange)="applyFilters()"
          title="Date de fin"
        />

        <!-- Reset Button -->
        <!-- <button class="btn-icon-reset" (click)="resetFilters()" title="Réinitialiser">
          <span class="material-symbols-outlined">refresh</span>
        </button> -->
      </div>
    </section>

    <!-- TABLE LIST -->
    <div class="list-section">
      <div class="list-header">
        <div class="list-title-group">
          <h2>Liste des opérations</h2>
          <!-- <span class="badge-count">{{ stats.total }} opérations</span> -->
        </div>
        <!-- <button class="btn btn-icon">
          <span class="material-symbols-outlined">settings</span>
        </button> -->
      </div>

      <section class="card table-card">
        <div class="table-wrapper">
          <table>
            <thead>
              <tr>
                <th>CLIENT</th>
                <th>BOOKING</th>
                <th>CONTENEURS</th>
                <th>VOLUME (M³)</th>
                <th>DÉBUT PRÉVU</th>
                <th>FIN ESTIMÉE</th>
                <th>ACTION</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let op of paginatedOperations">
                <td>
                  <div class="client-cell">
                    <div class="avatar-circle" [ngClass]="op.clientColor">
                      {{ op.clientInitials }}
                    </div>
                    <span class="client-name">{{ op.clientName }}</span>
                  </div>
                </td>
                <td class="font-medium">{{ op.booking }}</td>
                <td class="font-medium">{{ op.conteneurs }}</td>
                <td class="font-bold">{{ op.volume }}</td>
                <td class="text-muted">{{ op.debutPrevu }}</td>
                <td class="text-muted">{{ op.finEstimee }}</td>
                <td>
                  <button class="btn btn-icon" title="Imprimer" (click)="printOperation(op)">
                    <span class="material-symbols-outlined">print</span>
                  </button>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
        
        <div class="pagination-footer">
          <span class="page-info">PAGE {{ currentPage }} DE {{ totalPages }}</span>
          <div class="pagination-controls">
            <button class="btn-page" [disabled]="currentPage === 1" (click)="prevPage()">
              <span class="material-symbols-outlined">chevron_left</span>
            </button>
            <button class="btn-page" [disabled]="currentPage === totalPages" (click)="nextPage()">
              <span class="material-symbols-outlined">chevron_right</span>
            </button>
          </div>
        </div>
      </section>
    </div>
</div>
